<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
    
</head>
<body id="doktori"> 
    <!-- Meni-->
    <div id="naslovi">
        <div class="container">
            <div class="naslov">Doktori</div>
        </div>
    </div>
    <nav id="mainNav" class="navbar navbar-expand-lg navbar-light bg-light">

        <div class="meni">
            <ul class="meni-lista">
                <li class="meni-item">
                    <a class="nav-link" href="index.html">Početna</a>
                </li>
                <li class="meni-item">
                    <a class="nav- link" href="pregledi.html">Pregledi</a>
                </li>
                <li class="meni-item">
                    <a class="nav-link" href="pacijenti.html">Kartoni pacijenata</a>
                </li>
                <li class="meni-item">
                    <a class="nav-link" href="doktori.html">Doktori</a>
                </li>
            </ul>
            </div>
            </nav>

    <form action="">
<!--Deo za odabir akcije-->

    <div id="odabir_akcije">
        <input type="radio" name="odabir_akcije" id="prikazi" value="prikazi">
        <label for="radio_prikazi">Prikaži sve doktore</label>
        <input type="radio" name="odabir_akcije" id="kreiraj" value="kreiraj">
        <label for="radio_kreiraj">Kreiraj novi profil doktora</label>
        <input type="radio" name="odabir_akcije" id="izmeni" value="izmeni">
        <label for="radio_izmeni">Izmeni profil doktora</label>
        <input type="radio" name="odabir_akcije" id="obrisi" value="obrisi">
        <label for="radio_obrisi">Obriši profil doktora</label>
    </div>


 <!--Deo za prikaz svih doktora-->
<div id="doktori_get">
    <ul id="lista-za-pretragu-d">
        <li id="item-lista-za-pretragu-d">
    <button type="button" id="pretrazi-d">Pretraži doktore</button>
</li>
<li id="item-lista-za-pretragu-d">
    <pre id="get_odgovor"></pre>
</li>
</ul>
</div>
    


<!-- Deo za kreiranje novog profila doktora-->
    <div id="doktori_post">
        <ul id="lista-za-kreiranje-d">
        <li id="element-liste-za-kreiranje-d">
        <input type="text" name="novo-ime-d" id="novo-ime-d" placeholder="Unesite ime">
        </li>
        <li id="element-liste-za-kreiranje-d">
        <input type="text" name="novo-prezime-d" id="novo-prezime-d" placeholder="Unesite prezime">
    </li>
        <li id="element-liste-za-kreiranje-d">
        <input type="text" name="novi-jmbg-d" id="novi-jmbg-d" placeholder="Unesite JMBG">
    </li>
        <!--ovaj deo sigurno treba popraviti pa pogledati vežbe 3-->
    <li id="element-liste-za-kreiranje-d">
         <label for="doktor_kategorija" id="doktor_kategorija">Specijalista:</label>
        <select name="doktor_kategorija" id="doktor_kategorija">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </li>
        <li id="element-liste-za-kreiranje-d">
        <div id="dugme_za_kreiranje-d">
            <button type="button" id="kreiraj-d">Kreiraj</button>
        </div>
    </li>

    </ul>
    </div>
    

    <!-- Deo za izmenu profila doktora-->
    <div id="doktori_put">
        <ul id="lista-za-izmenu-d">
        <li id="element-liste-za-izmenu-d">
        <input type="text" name="ime-pretrazivanje-d" id="ime-pretrazivanje-d" placeholder="Unesite ID">
    </li>
        <li id="element-liste-za-izmenu-d">
        <input type="text" name="ime-put-d" id="ime-put-d" placeholder="Unesite novo ime">
    </li>
        <li id="element-liste-za-izmenu-d">
        <input type="text" name="prezime-put-d" id="prezime-put-d" placeholder="Unesite novo prezime">
    </li>
        <li id="element-liste-za-izmenu-d">
        <input type="text" name="jmbg-put-d" id="jmbg-put-d" placeholder="Unesite novi JMBG">
    </li>
        <li id="element-liste-za-izmenu-d">   
        <label for="kategorija-odabir-put-d" id="kategorija-odabir-put-d">Specijalista:</label>
        <select name="kategorija-odabir-put-d" id="kategorija-odabir-put-d">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </li>
        <li id="element-liste-za-izmenu-d">
        <div id="dugme_za_izmenu-d">
            <button type="button" id="izmena-d">Izmeni</button>
        </div>
        </li>
    </ul>
    </div>

    <!-- Deo za brisanje profila doktora-->
    <div id="doktori_delete">
        <ul id="lista-za-brisanje-d">
            <li id="element-liste-za-brisanje-d">
            <input type="text" name="brisanje-d" id="brisanje-d" placeholder="Unesite ID">
        </li>
            <li id="element-liste-za-brisanje-d">
            <div id="dugme_za_brisanje-d">
            <button type="button" id="obrisi-d">Obriši</button>
        </div>
    </li>
    </ul>
    </div>
</form>
</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

var blokovi = ["doktori_get","doktori_post","doktori_put", "doktori_delete"];

function skloniBlokove(){
    for(const blok of blokovi){
        document.getElementById(blok).style.display="none";
        }
};

skloniBlokove();
$("input[name=odabir_akcije]").on("click", prikaziBlok);

    $("#pretrazi-d").on("click", pretraziDoktore);
    $("#kreiraj-d").on("click", kreirajDoktora);
    $("#izmena-d").on("click", izmeniDoktora);
    $("#obrisi-d").on("click", obrisiDoktora);

function prikaziBlok(){
    switch($("input[name=odabir_akcije]:checked")[0].id){
            case "prikazi":
                skloniBlokove();
                document.getElementById("get_odgovor").innerHTML="";
                document.getElementById(blokovi[0]).style.display="block";
                break;
            case "kreiraj":
                skloniBlokove();
                document.getElementById(blokovi[1]).style.display="block";    
                break;
            case "izmeni":
                skloniBlokove();
                document.getElementById(blokovi[2]).style.display="block";
                break;
            case "obrisi":
                skloniBlokove();
                document.getElementById(blokovi[3]).style.display="block";
                break;
            default:
                break;
        }
           
    };




function resetHTTP(){
        skloniBlokove();
        $("input[name=odabir_akcije]").prop('checked', false);
    };

//TREBA DODATI ONAJ DEO ZA SPECIJALISTE ALI KASNIJE BUKVALNO SVE ISTO KAO VRATI SVE 

//Verovatno ces morati da menjas posle php urla da dodas nesto
function pretraziDoktore(){
    $.getJSON("doktori.php", { metoda: "vrati sve" }, function(data){
    document.getElementById("get_odgovor").innerHTML = JSON.stringify(data,null,2);
})};

function kreirajDoktora(){
    var values = {
                 "ime": $("#novo-ime-d").val(),
                 "prezime":$("#novo-prezime-d").val(),
                "jmbg":$("#novi-jmbg-d").val(),
                "id_kategorije": parseInt($("#doktor_kategorija").val())
                        };

$.post("doktori.php",{ metoda: "dodaj" }, JSON.stringify(values),function(data){
    alert("Odgovor od servera> "+data['poruka']);});
};

function izmeniDoktora(){
    var value=parseInt($("#izmena-d").val());
    var values = {
                 "ime": $("#novo-ime-d").val(),
                 "prezime":$("#novo-prezime-d").val(),
                "jmbg":$("#novi-jmbg-d").val(),
                "id_kategorije": parseInt($("#doktor_kategorija").val())
                        };
    $.post("doktori.php", { metoda: "izmeni", id: value, ime:ime, prezime:prezime, jmbg:jmbg, id_kategorije:id_kategorije}, function (data) {
            })
};


function obrisiDoktora(){
    var value= parseInt($("#brisanje-d").val());
    $.post("doktori.php", { metoda: "obrisi", id: value }, function (data) {
            })
};


</script>